<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
    <title>Document</title>
    <style>
        body {
            font: 12pt "Tahoma";
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .new-text-style {
            margin: 10px auto;
            display: block;
        }

        .div-slected {
            display: flex;
            flex-direction: column;
            width: 100%;
            justify-content: center;
            text-align: center;
            align-items: center;
        }

        .contener-style-new {
            display: flex;
            flex-direction: column;
            /* width: 100%; */
            justify-content: center;
            text-align: center;
            align-items: center;
        }
    </style>
</head>

<body>
    <script>

        // Create a new element
        const newElement = document.createElement('div');
        const row = document.createElement('div');
        const col = document.createElement('div');
        const newPara = document.createElement('input');
        const newPara2 = document.createElement('input');
        const btnElab = document.createElement('button');
        const textForEmpty = document.createElement('p');

        // Set attributes (if needed)
        newElement.setAttribute('id', 'new-section');
        row.setAttribute('class', 'row mb-3');
        col.setAttribute('class', 'col-auto');
        newElement.setAttribute('class', 'container contener-style-new');
        textForEmpty.setAttribute('class', 'alert alert-danger');
        textForEmpty.setAttribute('role', 'alert');
        // newPara.setAttribute('class', 'form-control-plaintext');


        // Set content
        newPara.type = 'text';
        newPara.name = 'text';
        newPara.placeholder = "Please Enter The Name"
        newPara2.type = 'date';
        newPara2.name = 'date';
        newPara2.placeholder = "Please Enter The time"
        // newPara2.textContent = 'This is a newly created paragraph element for the text enter!';
        btnElab.textContent = "Button"
        btnElab.type = "submit"
        btnElab.name = "submit"


        // Append the new element to the body of the document
        document.body.appendChild(newElement);
        newElement.appendChild(row)
        row.appendChild(col)
        col.appendChild(newPara);
        col.appendChild(newPara2)
        col.appendChild(btnElab)

        // add style here
        let newStyleOfPara = newElement.querySelectorAll("input");

        newStyleOfPara.forEach(paraGraph => {
            paraGraph.setAttribute('class', 'new-text-style form-control');
        });
        function storeData() {
            const dataOfDate = document.getElementsByName('date')[0].value;
            const dataOfText = document.getElementsByName('text')[0].value;

            // Check if the input fields are empty
            if (dataOfDate.trim() === '' || dataOfText.trim() === '') {
                textForEmpty.textContent = 'Both input fields must be filled to store data.';
                newElement.appendChild(textForEmpty);
                return;
                // Exit the function early if inputs are empty
            }
            // Check if there is existing data in local storage


            let existingData = JSON.parse(localStorage.getItem('allData')) || [];
            const isDuplicate = existingData.some(data => data.date === dataOfDate && data.text === dataOfText);


            if (isDuplicate) {
                alert('Data already exists in local storage. Skipping storage.');
            } else {
                // Add the new data to the existing data
                existingData.push({ date: dataOfDate, text: dataOfText });

                // Save the updated data to local storage
                localStorage.setItem('allData', JSON.stringify(existingData));

                alert('Data stored successfully!');
            }
            location.reload(true)

            // Call the loadData function to display existing data after storing new data
        }

        // Function to load data from local storage
        function loadData() {
            let allData = JSON.parse(localStorage.getItem('allData')) || [];

            // Display the data on the page
            allData.forEach(data => {
                // we will display the data here
                const dataElem = document.createElement('div');
                const displayText = document.createElement('p');
                const displayText2 = document.createElement('p');


                dataElem.setAttribute('class', 'div-slected')
                dataElem.appendChild(displayText)
                displayText.textContent = data.text;
                displayText2.textContent = data.date;
                document.body.appendChild(dataElem);
                dataElem.appendChild(displayText);
                dataElem.appendChild(displayText2);

            });
        }
        btnElab.addEventListener('click', storeData);
        // Call the loadData function to display existing data on page load
        loadData();

    </script>
</body>

</html>